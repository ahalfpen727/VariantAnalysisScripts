#!bin/bash

##############################################################################
# Set env variables and create array of microarrya data directories
##############################################################################

export WORKDIR="/media/drew/easystore/AnalysisBaseDir/GSA_Data"
declare -A wdir=( ["20180117"]="2018_07" ["20200110"]="2020_01" )

##############################################################################
# create input file with the IDAT fles and from those create maps
##############################################################################

for pfx in 20180117 20200110; do
    wdir=${wdir[$pfx]}
    touch $WORKDIR/$wdir/dir.txt
    cd $WORKDIR/$wdir
    find -iname "*_idat" | xargs ./dir.txt
    for f in ./dir.txt; do
	dir=$f
	cd $dir
	find -iname "*.idat" | xargs > $WORKDIR/$wdir/files.txt
done

    bcftools +gtc2vcf --gtcs  GTCs -o $wdir.maps.tsv


for f in $WORKDIR/$wdir/files.txt; do
    bcftools +gtc2vcf -i -g $f
done

done
	  
	  
	  
	  
	  
	  

